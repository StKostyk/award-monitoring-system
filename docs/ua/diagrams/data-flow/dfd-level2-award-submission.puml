@startuml DFD_Level2_Award_Submission_UA
!theme plain
skinparam defaultTextAlignment center

title Процес Подання Нагороди - Діаграма Потоків Даних (Рівень 2)

' Зовнішня Сутність
rectangle "Працівник" as employee #LightBlue

' Підпроцеси Подання Нагороди (2.0)
usecase "2.1\nВалідація\nВводу" as P21 #White
usecase "2.2\nСтворення\nЧернетки" as P22 #White
usecase "2.3\nПрикріплення\nДокументів" as P23 #White
usecase "2.4\nПодання\nНагороди" as P24 #White
usecase "2.5\nВизначення\nРівня Рецензування" as P25 #White
usecase "2.6\nПризначення\nРецензента" as P26 #White

' Пов'язані Процеси
usecase "3.0\nОбробка\nДокументів" as P3 #LightGray
usecase "4.0\nМеханізм\nРобочих Процесів" as P4 #LightGray
usecase "5.0\nСповіщення" as P5 #LightGray
usecase "7.0\nАудит" as P7 #LightGray

' Сховища Даних
database "D2\nБаза\nНагород" as D2 #LightYellow
database "D3\nСховище\nДокументів" as D3 #LightYellow
database "D4\nСтан\nРобочих Процесів" as D4 #LightYellow

' Потоки Працівника
employee --> P21 : Деталі Нагороди\n(назва, організація, дата, категорія)
P22 --> employee : ID Чернетки
P24 --> employee : Підтвердження\nПодання

' Внутрішні Потоки Процесів
P21 --> P22 : Валідовані Дані
P21 --> employee : Помилки Валідації

P22 --> D2 : Збереження Чернетки\n(статус=ЧЕРНЕТКА)
P22 --> P7 : Подія Створення Чернетки

P23 --> D3 : Посилання на Документ
P23 --> P3 : Документ для\nШІ-Обробки
P3 --> P23 : Розпізнані Метадані

employee --> P23 : Файли Документів
employee --> P24 : Команда Подання

P24 --> P21 : Фінальна Валідація
P24 --> D2 : Оновлення Статусу\n(статус=ОЧІКУЄ)
P24 --> P25 : Дані Нагороди

P25 --> D2 : Читання Категорії
P25 --> P26 : Рівень Нагороди

P26 --> D4 : Створення Запиту\n(статус=ПОДАНО)
P26 --> P4 : Робочий Процес Ініційовано
P26 --> P5 : Тригер Сповіщення

P24 --> P7 : Подія Подання

' Примітки
note right of P21
    Правила Валідації:
    • Перевірка обов'язкових полів
    • Валідація діапазону дат
    • Виявлення дублікатів
    • Валідація категорії
end note

note right of P25
    Визначення Рівня:
    • КАФЕДРА/ФАК → Секретар Факультету
    • УНІВ+ → Секретар Факультету → Декан → Ректор
end note

@enduml


