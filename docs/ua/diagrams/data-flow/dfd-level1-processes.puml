@startuml DFD_Level1_Processes_UA
!theme plain
skinparam defaultTextAlignment center

title Система Моніторингу та Відстеження Нагород - Діаграма Потоків Даних (Рівень 1 - Основні Процеси)

' Зовнішні Сутності
rectangle "Працівник" as employee #LightBlue
rectangle "Рецензент\n(Секретар/Декан/Ректор)" as reviewer #LightGreen
rectangle "Адміністратор" as admin #LightGray

rectangle "LDAP" as ldap #Pink
rectangle "ШІ-Сервіс" as ai #Pink
rectangle "Email/SMS" as notify_ext #Pink
rectangle "Файлове\nСховище" as storage #Pink

' Процеси
usecase "1.0\nУправління\nКористувачами" as P1 #White
usecase "2.0\nПодання\nНагород" as P2 #White
usecase "3.0\nОбробка\nДокументів" as P3 #White
usecase "4.0\nМеханізм\nРобочих Процесів" as P4 #White
usecase "5.0\nСервіс\nСповіщень" as P5 #White
usecase "6.0\nАналітика\nта Звітність" as P6 #White
usecase "7.0\nВідповідність\nта Аудит" as P7 #White
usecase "8.0\nПошуковий\nРушій" as P8 #White

' Сховища Даних
database "D1\nБаза\nКористувачів" as D1 #LightYellow
database "D2\nБаза\nНагород" as D2 #LightYellow
database "D3\nСховище\nДокументів" as D3 #LightYellow
database "D4\nСтан\nРобочих Процесів" as D4 #LightYellow
database "D5\nЖурнал\nАудиту" as D5 #LightYellow
database "D6\nПошуковий\nІндекс" as D6 #LightYellow
database "D7\nКеш" as D7 #LightYellow

' Потоки Працівника
employee --> P1 : Реєстрація\nОновлення Профілю
employee --> P2 : Дані Нагороди\nПодання
employee --> P3 : Завантаження Документу
P1 --> employee : Статус Акаунту
P2 --> employee : Підтвердження Подання
P5 --> employee : Сповіщення про Статус
P6 --> employee : Персональна Панель

' Потоки Рецензента
reviewer --> P4 : Рішення Рецензування
P4 --> reviewer : Черга Рецензування
P5 --> reviewer : Сповіщення про Призначення
P6 --> reviewer : Звіти Аналітики

' Потоки Адміністратора
admin --> P1 : Управління Користувачами
admin --> P7 : Запити Аудиту
P7 --> admin : Звіти Аудиту

' Потоки Процес до Процесу
P1 --> P7 : Дії Користувача
P2 --> P3 : Документи для Обробки
P2 --> P4 : Нагорода для Рецензування
P2 --> P7 : Події Подання
P3 --> P2 : Розпізнані Метадані
P3 --> P8 : Індексація Документу
P4 --> P5 : Тригери Сповіщень
P4 --> P7 : Події Робочих Процесів
P6 --> P8 : Пошукові Запити

' Потоки Процес до Сховища Даних
P1 --> D1 : Збереження Користувача
P1 <-- D1 : Читання Користувача
P1 --> D7 : Кешування Сесії

P2 --> D2 : Збереження Нагороди
P2 <-- D2 : Читання Нагороди
P2 --> D7 : Кешування Нагороди

P3 --> D3 : Збереження Документу
P3 <-- D3 : Читання Документу

P4 --> D4 : Збереження Стану
P4 <-- D4 : Читання Стану
P4 --> D2 : Оновлення Статусу Нагороди

P6 <-- D2 : Дані Нагород
P6 <-- D1 : Дані Користувачів
P6 --> D7 : Кешування Звітів

P7 --> D5 : Збереження Журналу Аудиту
P7 <-- D5 : Читання Журналу Аудиту

P8 --> D6 : Індексація Даних
P8 <-- D6 : Результати Пошуку

' Потоки Зовнішніх Систем
P1 --> ldap : Запит Аутентифікації
ldap --> P1 : Дані Користувача

P3 --> ai : Запит на Парсинг
ai --> P3 : Розпізнані Дані

P3 --> storage : Збереження Файлу
storage --> P3 : URL Файлу

P5 --> notify_ext : Надсилання Повідомлення

@enduml


