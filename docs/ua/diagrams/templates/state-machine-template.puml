@startuml StateMachine_Template_UA
' =============================================================================
' Шаблон Діаграми Скінченного Автомата
' Система Моніторингу та Відстеження Нагород
' =============================================================================
' Використання: Скопіюйте цей шаблон для документації життєвого циклу сутностей
' Найкраще для: Статус нагороди, робочий процес запиту, обліковий запис, обробка документів
' =============================================================================

!theme plain

' =============================================================================
' СТИЛІЗАЦІЯ СТАНІВ
' =============================================================================
skinparam state {
    BackgroundColor<<initial>> LightBlue
    BackgroundColor<<processing>> LightYellow
    BackgroundColor<<success>> LightGreen
    BackgroundColor<<error>> LightCoral
    BackgroundColor<<final>> DarkGray
}

title Діаграма Скінченного Автомата [Назва Сутності]

' =============================================================================
' ПОЧАТКОВИЙ СТАН
' =============================================================================
[*] --> STATE_1 <<initial>> : Подія-тригер

' =============================================================================
' ПРОСТІ СТАНИ
' =============================================================================
state STATE_1 <<initial>> {
    [*] --> SubState1
    SubState1 --> SubState2 : Внутрішній перехід
    SubState2 --> [*]
    
    note right of SubState1
        Опис того, що відбувається
        в цьому підстані
    end note
}

state STATE_2 <<processing>> {
    ' Стан обробки з таймаутом
    state "Обробка" as proc
    proc : Entry: Запустити таймер
    proc : Do: Виконати операцію
    proc : Exit: Зупинити таймер
}

state STATE_3 <<success>> {
    ' Стан успіху/завершення
}

state STATE_4 <<error>> {
    ' Стан помилки/відмови
}

state STATE_5 <<final>> {
    ' Термінальний стан
}

' =============================================================================
' ПЕРЕХОДИ СТАНІВ
' =============================================================================
' Базовий перехід
STATE_1 --> STATE_2 : Подія-тригер\n[Умова-гвард]

' Перехід з дією
STATE_2 --> STATE_3 : Успіх\n/ Дія для виконання

' Перехід помилки
STATE_2 --> STATE_4 : Відмова\n[Умова помилки]\n/ Журналювати помилку

' Перехід відновлення
STATE_4 --> STATE_2 : Повторити\n[Кількість спроб < макс]

' Термінальні переходи
STATE_3 --> STATE_5 : Архівувати\n[Період зберігання минув]
STATE_4 --> [*] : Відмовитись\n[Макс спроб перевищено]
STATE_5 --> [*]

' =============================================================================
' ТОЧКИ ВИБОРУ/РІШЕННЯ
' =============================================================================
state decision <<choice>>
STATE_2 --> decision : Оцінити
decision --> STATE_3 : [умова = true]
decision --> STATE_4 : [умова = false]

' =============================================================================
' РОЗГАЛУЖЕННЯ/ОБ'ЄДНАННЯ (Паралельні Стани)
' =============================================================================
state fork_state <<fork>>
state join_state <<join>>

STATE_1 --> fork_state
fork_state --> ParallelState1
fork_state --> ParallelState2
ParallelState1 --> join_state
ParallelState2 --> join_state
join_state --> STATE_2

' =============================================================================
' СТАН ІСТОРІЇ
' =============================================================================
' [H] - Поверхнева історія
' [H*] - Глибока історія
state CompositeState {
    [H] --> LastActiveState
    state LastActiveState
}

' =============================================================================
' УМОВИ-ГВАРДИ
' =============================================================================
' Формат: [умова] - перехід тільки якщо умова істинна
' Приклади:
' [isValid]
' [retryCount < 3]
' [hasPermission]
' [deadline not passed]

' =============================================================================
' ДІЇ
' =============================================================================
' Формат: / дія - виконати дію під час переходу
' Приклади:
' / sendNotification
' / updateDatabase
' / logAuditEvent
' / incrementCounter

' =============================================================================
' ЛЕГЕНДА
' =============================================================================
legend right
    |= Колір Стану |= Значення |
    | <<initial>> | Початковий стан |
    | <<processing>> | Обробка/В процесі |
    | <<success>> | Успіх/Завершення |
    | <<error>> | Помилка/Відмова |
    | <<final>> | Термінальний/Архів |
endlegend

' =============================================================================
' ПРИМІТКИ
' =============================================================================
note "Скінченний автомат для управління життєвим циклом [Сутності]" as N1

@enduml


