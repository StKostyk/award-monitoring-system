# Фреймворк управління релізами

> Система моніторингу та відстеження нагород - Документація Фази 16

## Огляд

Цей документ визначає фреймворк управління релізами, стратегію версіонування та процеси затвердження для Системи моніторингу нагород.

---

## Стратегія версіонування

Проєкт дотримується [Семантичного версіонування 2.0.0](https://semver.org/):

```
MAJOR.MINOR.PATCH[-PRERELEASE]
  │     │     │        │
  │     │     │        └── Ідентифікатор попереднього релізу (alpha, beta, rc)
  │     │     └────────── Patch: Виправлення помилок, патчі безпеки
  │     └──────────────── Minor: Нові функції, зворотна сумісність
  └────────────────────── Major: Зламні зміни, основні релізи
```

**Приклади**: `1.0.0`, `1.2.3`, `2.0.0-beta.1`, `1.5.0-rc.2`

---

## Типи релізів

| Тип | Версія | Процес | Затвердження | Терміни | Стратегія |
|-----|--------|--------|--------------|---------|-----------|
| **Major** | x.0.0 | Повна регресія, валідація staging | Архітектурна рада | Щоквартально | Blue-Green + Canary |
| **Minor** | x.y.0 | Тестування функцій, інтеграційні тести | Product Owner | Щомісяця | Blue-Green |
| **Patch** | x.y.z | Цільове тестування, сканування безпеки | Tech Lead | За потреби | Rolling |
| **Emergency** | x.y.z-hotfix | Тільки критичний шлях | On-call Manager | Негайно | Blue-Green (прискорений) |

---

## Робочий процес релізу

### 1. Major-реліз (x.0.0)

**Тригер**: Зламні зміни, основні функції, оновлення архітектури

**Процес**:
1. Заморозка функцій за 2 тижні до релізу
2. Повне регресійне тестування на staging
3. Аудит безпеки та тестування на проникнення
4. Затвердження архітектурною радою
5. Підпис стейкхолдерів
6. Blue-Green розгортання з 10% canary
7. 48-годинний період моніторингу
8. Рішення про повний rollout або rollback

**Артефакти**:
- Release notes зі зламними змінами
- Посібник з міграції
- Оновлена документація API

### 2. Minor-реліз (x.y.0)

**Тригер**: Нові функції, покращення, сумісні зміни

**Процес**:
1. Функції завершені в гілці develop
2. Інтеграційні та E2E тести пройдено
3. Затвердження Product Owner
4. Blue-Green розгортання
5. 24-годинний період моніторингу

### 3. Patch-реліз (x.y.z)

**Тригер**: Виправлення помилок, патчі безпеки, оновлення залежностей

**Процес**:
1. Виправлення реалізовано та протестовано
2. Огляд та затвердження Tech Lead
3. Rolling розгортання
4. Негайний моніторинг

### 4. Emergency/Hotfix-реліз

**Тригер**: Критичні production-проблеми, вразливості безпеки

**Процес**:
1. Оголошення інциденту
2. Гілка виправлення від main
3. Мінімальне тестування (критичний шлях)
4. Затвердження On-call Manager
5. Негайне Blue-Green розгортання
6. Post-mortem протягом 48 годин

**Терміни**: < 4 години від інциденту до розгортання

---

## Стратегія гілок

```
main ─────────────────────────────────────────────► production
  │                                                    ▲
  └─► release/1.2.0 ──────────────────────────────────┘
         ▲
develop ─┴───────────────────────────────────────────►
  │
  ├─► feature/AWD-123-user-auth
  ├─► feature/AWD-124-dashboard
  └─► bugfix/AWD-125-login-fix
```

| Гілка | Призначення | Мержиться в |
|-------|-------------|-------------|
| `main` | Production-код | - |
| `release/x.y.z` | Підготовка релізу | main |
| `develop` | Інтеграційна гілка | release/* |
| `feature/*` | Нові функції | develop |
| `bugfix/*` | Виправлення помилок | develop |
| `hotfix/*` | Екстрені виправлення | main + develop |

---

## Чек-лист релізу

### До релізу
- [ ] Всі тести пройдено (unit, integration, E2E)
- [ ] Quality gates пройдено (SonarQube)
- [ ] Сканування безпеки завершено (OWASP)
- [ ] Документація оновлена
- [ ] Changelog підготовлено
- [ ] Версія оновлена

### День релізу
- [ ] Staging-розгортання перевірено
- [ ] Smoke-тести пройдено
- [ ] Дашборди моніторингу готові
- [ ] План rollback підтверджено
- [ ] On-call команда повідомлена
- [ ] Production-розгортання виконано

### Після релізу
- [ ] Health checks проходять
- [ ] Ключові метрики в нормі
- [ ] Немає критичних сповіщень
- [ ] Release notes опубліковано
- [ ] Стейкхолдери повідомлені

---

## Метрики DORA

| Метрика | Ціль | Поточне |
|---------|------|---------|
| **Частота розгортань** | Щотижня | TBD |
| **Час від коміту до production** | < 1 день | TBD |
| **Частота невдалих змін** | < 5% | TBD |
| **Середній час відновлення** | < 15 хв | TBD |

---

**Версія**: 1.0  
**Останнє оновлення**: Січень 2026  
**Автор**: Стефан Костик

