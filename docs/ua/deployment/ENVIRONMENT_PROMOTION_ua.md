# Стратегія просування середовищ

> Система моніторингу та відстеження нагород - Документація Фази 16

## Огляд

Цей документ визначає потік просування середовищ та gates для розгортання змін від розробки до production.

---

## Конвеєр середовищ

```
┌───────────┐    ┌───────────┐    ┌───────────┐    ┌───────────┐    ┌───────────┐
│    DEV    │───►│    INT    │───►│    UAT    │───►│  PREPROD  │───►│   PROD    │
│           │    │           │    │           │    │           │    │           │
│  Feature  │    │ Автомат.  │    │  Ручне    │    │Продуктивн.│    │Blue-Green │
│  Branches │    │ Тестув.   │    │ Тестув.   │    │ Тестув.   │    │ Розгорт.  │
└───────────┘    └───────────┘    └───────────┘    └───────────┘    └───────────┘
    Авто           Авто            Ручне           Авто             Ручне
```

---

## Визначення середовищ

| Середовище | Призначення | Дані | Розгортання | Доступ |
|------------|-------------|------|-------------|--------|
| **DEV** | Розробка функцій | Синтетичні | На коміт | Розробники |
| **INT** | Інтеграційне тестування | Синтетичні | На merge PR | Dev + QA |
| **UAT** | Приймальне тестування | Анонімізовані prod | На затвердження | Стейкхолдери |
| **PREPROD** | Дзеркало production | Анонімізовані prod | На прохід UAT | Ops + QA |
| **PROD** | Робоча система | Production | На затвердження | Всі користувачі |

---

## Gates просування

### DEV → INT
| Gate | Тип | Критерії |
|------|-----|----------|
| Збірка | Автоматичний | Компіляція успішна |
| Unit-тести | Автоматичний | 100% пройдено, ≥85% покриття |
| Lint/Style | Автоматичний | Без порушень |

### INT → UAT
| Gate | Тип | Критерії |
|------|-----|----------|
| Інтеграційні тести | Автоматичний | 100% пройдено |
| E2E-тести | Автоматичний | Критичні шляхи пройдено |
| Сканування безпеки | Автоматичний | Немає critical/high вразливостей |
| Code Review | Ручний | Затверджено рецензентом |

### UAT → PREPROD
| Gate | Тип | Критерії |
|------|-----|----------|
| UAT Sign-off | Ручний | Затвердження Product Owner |
| Регресійні тести | Автоматичний | Повний набір пройдено |
| Документація | Ручний | Оновлено та перевірено |

### PREPROD → PROD
| Gate | Тип | Критерії |
|------|-----|----------|
| Тести продуктивності | Автоматичний | P99 < 200мс, throughput OK |
| Навантажувальні тести | Автоматичний | Витримує 2x очікуваного навантаження |
| Аудит безпеки | Ручний | Затверджено (major-релізи) |
| Затвердження змін | Ручний | CAB або Tech Lead |
| План Rollback | Ручний | Перевірено та готово |

---

## Конфігурація середовищ

| Конфігурація | DEV | INT | UAT | PREPROD | PROD |
|--------------|-----|-----|-----|---------|------|
| **Репліки** | 1 | 2 | 2 | 3 | 3 |
| **CPU Request** | 250m | 500m | 500m | 500m | 500m |
| **Пам'ять** | 512Mi | 1Gi | 1Gi | 1Gi | 1Gi |
| **БД** | Локальна | Спільна | Виділена | Виділена | HA Кластер |
| **Логування** | Debug | Info | Info | Warn | Warn |
| **Моніторинг** | Базовий | Повний | Повний | Повний | Повний + Alerts |

---

## Тригери розгортання

| Середовище | Тригер | Автоматизація |
|------------|--------|---------------|
| **DEV** | Push в feature-гілку | GitHub Actions |
| **INT** | Merge в develop | GitHub Actions |
| **UAT** | Створена release-гілка | GitHub Actions |
| **PREPROD** | UAT-тести пройдено | GitHub Actions |
| **PROD** | Ручне затвердження | GitHub Actions + ArgoCD |

---

## Стратегія Rollback

| Середовище | Метод | Час |
|------------|-------|-----|
| DEV/INT | Повторне розгортання попередньої | 2 хв |
| UAT | Повторне розгортання попередньої | 5 хв |
| PREPROD | Kubernetes rollback | 2 хв |
| PROD | Blue-Green перемикання | < 1 хв |

---

**Версія**: 1.0  
**Останнє оновлення**: Січень 2026  
**Автор**: Стефан Костик

