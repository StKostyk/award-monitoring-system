# ADR-007: Вибір пошукової системи

**Статус**: Прийнято  
**Дата**: 2025-08-20  
**Автор**: Стефан Костик  
**Зацікавлені сторони**: Архітектор проекту, Команда розробки

---

## Контекст

Система моніторингу та відстеження нагород потребує розширених можливостей пошуку для нагород, документів та профілів користувачів. Це включає повнотекстовий пошук, фасетний пошук та аналітику для функцій звітності.

### Передумови
- Повнотекстовий пошук по описах нагород та документах
- Фасетний пошук для фільтрації нагород за критеріями
- Аналітика пошуку для відстеження використання та інсайтів
- Підтримка багатомовного контенту (англійська/українська)

---

## Рішення

**Elasticsearch 8+** було обрано як пошукову систему для Системи моніторингу та відстеження нагород.

### Обраний підхід
- **Пошукова система**: Elasticsearch 8+ (остання стабільна версія)
- **Інтеграція**: Spring Data Elasticsearch з Spring Boot
- **Розгортання**: Один вузол для розробки, кластер для продакшену
- **Випадки використання**: Пошук нагород, пошук контенту документів, аналітика

### Обґрунтування
- **Повнотекстовий пошук**: Розширені можливості аналізу тексту та оцінювання
- **Продуктивність**: Швидкий час відповіді пошуку з оптимізацією індексування
- **Багатомовність**: Відмінна підтримка декількох мов та аналізаторів
- **Аналітика**: Вбудовані агрегації для аналітики пошуку та звітності
- **Інтеграція Spring**: Хороша підтримка Spring Data Elasticsearch

---

## Наслідки

### Позитивні наслідки
- **Продуктивність пошуку**: Час відповіді пошуку менше секунди
- **Користувацький досвід**: Розширені функції пошуку покращують зручність використання
- **Аналітика**: Багата аналітика пошуку для інсайтів та звітності
- **Масштабованість**: Горизонтальне масштабування для великих обсягів документів

### Негативні наслідки
- **Використання ресурсів**: Значні вимоги до пам'яті та CPU
- **Складність**: Додатковий компонент інфраструктури для управління
- **Крива навчання**: Elasticsearch query DSL та оптимізація

---

## Розглянуті альтернативи

### Альтернатива 1: Apache Solr
- **Переваги**: Сильне управління конфігурацією, хороша документація
- **Недоліки**: Складніше налаштування, менше cloud-native функцій
- **Причина відхилення**: Elasticsearch краща хмарна інтеграція

### Альтернатива 2: PostgreSQL повнотекстовий пошук
- **Переваги**: Відсутність додаткової інфраструктури, просте налаштування
- **Недоліки**: Обмежені функції пошуку, погана масштабованість для складних запитів
- **Причина відхилення**: Недостатньо для розширених вимог пошуку

---

## Примітки з реалізації

### Технічні вимоги
- **Версія Elasticsearch**: 8.0+ для останніх функцій безпеки та продуктивності
- **Інтеграція Spring**: Spring Data Elasticsearch 5.0+
- **Пам'ять**: Мінімум 4GB heap для продакшену
- **Сховище**: Рекомендується SSD для оптимальної продуктивності

### Конфігурація індексу
```json
{
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "analyzer": "multilingual_analyzer"
      },
      "description": {
        "type": "text",
        "analyzer": "multilingual_analyzer"
      },
      "tags": {
        "type": "keyword"
      },
      "created_date": {
        "type": "date"
      }
    }
  }
}
```

### Стратегія пошуку
- **Індекс нагород**: Метадані та описи нагород
- **Індекс документів**: Контент та метадані документів
- **Індекс користувачів**: Профілі користувачів для адміністративного пошуку

---

## Метрики успіху

- **Час відповіді пошуку**: < 50ms для 95-го перцентиля
- **Релевантність пошуку**: > 85% задоволеності користувачів результатами
- **Розмір індексу**: < 10GB для початкового набору даних

---

## Пов'язані документи

- **Технічний стек**: [Вибір технологічного стеку](../TECH_STACK_ua.md)
- **Інші ADR**: [ADR-004 База даних](./ADR-004-Database-ua.md)
- **Зовнішні ресурси**: [Документація Elasticsearch](https://www.elastic.co/guide/)

---

## Історія версій

| **Дата** | **Автор** | **Зміни** | **Причина** |
|----------|------------|-------------|------------|
| 2025-08-20 | Стефан Костик | Початкова версія | Створення документа |

---

**Статус документа**: Затверджено  
**Дата наступного огляду**: 2026-02-20  
**Категорія ADR**: Технологія 