# =============================================================================
# Award Monitoring & Tracking System - SonarQube Configuration
# =============================================================================
# Purpose: Code quality analysis and quality gate configuration
# Version: 1.0
# Last Updated: January 2026
#
# Run with: mvn sonar:sonar
# =============================================================================

# Project Identification
sonar.projectKey=award-monitoring-system
sonar.projectName=Award Monitoring & Tracking System
sonar.projectVersion=1.0.0
sonar.organization=kostyk-stefan

# Project Description
sonar.projectDescription=Enterprise-grade award monitoring and tracking platform for Ukrainian educational institutions

# =============================================================================
# Source Configuration
# =============================================================================

# Source directories
sonar.sources=src/main/java,src/main/resources
sonar.tests=src/test/java,src/test/resources

# Binaries for analysis
sonar.java.binaries=target/classes
sonar.java.test.binaries=target/test-classes

# Libraries (optional, for more accurate analysis)
sonar.java.libraries=target/dependency/*.jar

# Source encoding
sonar.sourceEncoding=UTF-8

# Java version
sonar.java.source=21
sonar.java.target=21

# =============================================================================
# Coverage Configuration
# =============================================================================

# JaCoCo coverage reports
sonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml,target/site/jacoco-it/jacoco.xml

# Exclude from coverage
sonar.coverage.exclusions=\
  **/config/**,\
  **/exception/**,\
  **/*Application.java,\
  **/*Config.java,\
  **/*Configuration.java,\
  **/dto/**,\
  **/entity/**,\
  **/model/**,\
  **/constant/**,\
  **/enum/**

# =============================================================================
# Analysis Exclusions
# =============================================================================

# Exclude from analysis completely
sonar.exclusions=\
  **/generated/**,\
  **/target/**,\
  **/node_modules/**,\
  **/*.min.js,\
  **/*.min.css,\
  **/db/migration/**,\
  **/*_.java

# Exclude from duplication detection
sonar.cpd.exclusions=\
  **/dto/**,\
  **/entity/**,\
  **/*Test.java,\
  **/*IT.java

# =============================================================================
# Quality Gate Configuration
# =============================================================================

# Wait for quality gate result
sonar.qualitygate.wait=true

# Fail pipeline on quality gate failure
sonar.qualitygate.timeout=300

# =============================================================================
# Quality Thresholds (enforced by Quality Gate)
# =============================================================================

# These are defined in SonarQube Quality Gate, but documented here:
#
# Code Coverage:
#   - Overall coverage: >= 85%
#   - New code coverage: >= 85%
#
# Duplications:
#   - Duplicated lines: <= 3%
#   - New duplicated lines: <= 3%
#
# Maintainability:
#   - Rating: A
#   - Technical debt ratio: <= 5%
#   - New technical debt ratio: <= 5%
#
# Reliability:
#   - Rating: A
#   - Bugs: 0 (blocker/critical)
#
# Security:
#   - Rating: A
#   - Vulnerabilities: 0 (blocker/critical)
#   - Security hotspots reviewed: 100%

# =============================================================================
# Issue Configuration
# =============================================================================

# Severity mapping
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore field injection warnings (using constructor injection)
sonar.issue.ignore.multicriteria.e1.ruleKey=java:S6813
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.java

# Ignore utility class constructor (using Lombok @UtilityClass)
sonar.issue.ignore.multicriteria.e2.ruleKey=java:S1118
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*Utils.java

# Ignore too many parameters for DTOs (builder pattern in use)
sonar.issue.ignore.multicriteria.e3.ruleKey=java:S107
sonar.issue.ignore.multicriteria.e3.resourceKey=**/dto/**

# =============================================================================
# Language-Specific Settings
# =============================================================================

# TypeScript/Angular frontend (if in same repo)
# sonar.typescript.lcov.reportPaths=frontend/coverage/lcov.info
# sonar.typescript.tsconfigPath=frontend/tsconfig.json

# =============================================================================
# SCM Configuration
# =============================================================================

# SCM provider
sonar.scm.provider=git

# Disable SCM on certain paths
sonar.scm.exclusions.disabled=false

# =============================================================================
# External Analyzers Integration
# =============================================================================

# Checkstyle report
sonar.java.checkstyle.reportPaths=target/checkstyle-result.xml

# PMD report
sonar.java.pmd.reportPaths=target/pmd.xml

# SpotBugs report
sonar.java.spotbugs.reportPaths=target/spotbugsXml.xml

# OWASP Dependency Check report
sonar.dependencyCheck.htmlReportPath=target/dependency-check-report.html
sonar.dependencyCheck.jsonReportPath=target/dependency-check-report.json

# =============================================================================
# Additional Settings
# =============================================================================

# Enable verbose logging (for debugging)
# sonar.verbose=true

# Log analysis progress
sonar.log.level=INFO

# Parallel analysis
sonar.scanAllFiles=true

